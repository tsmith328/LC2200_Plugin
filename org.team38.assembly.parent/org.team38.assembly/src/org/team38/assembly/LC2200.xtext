grammar org.team38.assembly.LC2200 with org.eclipse.xtext.common.Terminals

generate lC2200 "http://www.team38.org/assembly/LC2200"

//Rules
Program:
	lines+=(Instruction | Directive)*
;

Instruction:
	label=LABEL? instruction=(RInstruction | IInstruction | JInstruction | OInstruction) (COMMENT | NEWLINE)?
;

Directive:
	label=LABEL? directive=(NOOPDirective | WordDirective) (COMMENT | NEWLINE)?
;
	
RInstruction:
	r_opcode=ROP reg1=REG COMMA reg2=REG COMMA reg3=REG;

IInstruction:
	i_opcode=IOP_IMM reg1=REG COMMA reg2=REG COMMA imm=IMMEDIATE  |
	i_opcode=IOP_OFFSET reg1=REG COMMA imm=IMMEDIATE LPAREN reg2=REG RPAREN  |
	i_opcode=IOP_LABEL reg1=REG COMMA reg2=REG COMMA imm=LABEL_IMM 
;

JInstruction:
	j_opcode=JOP reg1=REG COMMA reg2=REG
;

OInstruction:
	o_opcode=OOP
;

NOOPDirective:
	n_dir=NOOP
;

WordDirective:
	w_dir=WORD imm=IMMEDIATE
;

//Tokens
terminal NOOP:
	'noop'
;

terminal WORD:
	'.word'
;

terminal OOP:
	'halt' 	|
	'ei'	|
	'di'	|
	'reti'
;

terminal JOP:
	'jalr'
;

terminal IOP_IMM:
	'addi'
;

terminal IOP_OFFSET:
	'lw' |
	'sw'
;

terminal IOP_LABEL:
	'beq'
;

terminal LPAREN:
	'('
;

terminal RPAREN:
	')'
;

terminal COMMA:
	','
;

terminal COMMENT:
	';' !('\n'|'\r')* ('\r'? '\n')?
;

terminal NEWLINE:
	'\n'
;

terminal ROP:
	'add'	|
	'nand'
;

terminal REG:
	'$zero' |
	'$at'	|
	'$v0'	|
	'$a0'	|
	'$a1'	|
	'$a2'	|
	'$a3'	|
	'$a4'	|
	'$s0'	|
	'$s1'	|
	'$s2'	|
	'$s3'	|
	'$k0'	|
	'$sp'	|
	'$fp'	|
	'$ra'
;

terminal IMMEDIATE:
	('0x')?(INT)
;

terminal LABEL_IMM:
	('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
;

terminal LABEL:
	LABEL_IMM':'
;
